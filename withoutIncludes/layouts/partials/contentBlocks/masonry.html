{{ $block := .Scratch.Get "current_block" }}
{{ $context := . }}

<div class="masonry">
    {{ range $index, $gridBlock := $block.Content }}
        <div class="masonry__brick">
            {{ $.Scratch.Set "current_block" $gridBlock }}
            {{ partial (printf "contentBlocks/%s.html" $gridBlock.template) $context }}
            {{ $.Scratch.Set "current_block" $block }}
        </div>
    {{ end }}
</div>